{% load static %}
<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

</head>
<body>
  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}
  <form method="POST" enctype=multipart/form-data>
    {% csrf_token %}
    Add Skill : <input type="text" name="skill_name" placeholder="Skill">
    Select Skill Type :
    <select class="" name="skill_type">
      <option value="1">Developer</option>
      <option value="2">Network</option>
      <option value="3">System</option>
      <option value="4">Database Analysis</option>
    </select>
    <button type="submit" name="button" id="btnAdd" >Add</button>
    <button type="button" name="button" id="btnTest" onclick="myFunction({{Skill_name}})">Test</button>
  </form>
  <br>
  <table border="3">
    <thead>
      <th>Skill Name</th>
      <th>Skill Type</th>
    </thead>
    <tbody>
      {% for skill in Skill %}
      <tr>
        <td>{{skill.skill_name}}</td>
        <td>{{skill.skill_type}}</td>
      </tr>
      {% endfor%}
    </tbody>
  </table>
  <form id="new_user_form">
    {% csrf_token %}
    <input type="text" id="name" placeholder="Name" name="name" value="">
    <select class="" name="type" id="type">
      <option value="1">Developer</option>
      <option value="2">Network</option>
      <option value="3">System</option>
      <option value="4">Database Analysis</option>
    </select>
    <input type="submit" value="submit">
  </form>

  <h1>Test LIST!!</h1>
  {{ Skill_name }}
  {% for skill_name in Skill_name %}
    <h1>4</h1>
    <h1>{{skill_name}}</h1>
  {% endfor%}

  <h2>Bootstrap Table Checkbox Select All and Cancel</h2>
  <table class="table table-striped">
    <tr>
      <th class="active">
        <input type="checkbox" class="select-all checkbox" name="select-all" />
      </th>
      <th class="success">Name</th>
      <th class="warning">Gender</th>
      <th class="danger">Age</th>
      <th class="info">Birth</th>
    </tr>
    <tr>
      <td class="active">
        <input type="checkbox" class="select-item checkbox" name="select-item" value="1000" />
      </td>
      <td class="success">Tom</td>
      <td class="warning">boy</td>
      <td class="danger">20</td>
      <td class="info">09-20</td>
    </tr>
    <tr>
      <td class="active">
        <input type="checkbox" class="select-item checkbox" name="select-item" value="1001" />
      </td>
      <td class="success">andy</td>
      <td class="warning">girl</td>
      <td class="danger">21</td>
      <td class="info">09-21</td>
    </tr>
    <tr>
      <td class="active">
        <input type="checkbox" class="select-item checkbox" name="select-item" value="1002" />
      </td>
      <td class="success">Alina</td>
      <td class="warning">girl</td>
      <td class="danger">22</td>
      <td class="info">09-22</td>
    </tr>
    <tr>
      <td class="active">
        <input type="checkbox" class="select-item checkbox" name="select-item" value="1003" />
      </td>
      <td class="success">Aaron </td>
      <td class="warning">boy</td>
      <td class="danger">23</td>
      <td class="info">09-23</td>
    </tr>
  </table>
  <button id="select-all" class="btn button-default">SelectAll/Cancel</button>
  <button id="select-invert" class="btn button-default">Invert</button>
  <button id="selected" class="btn button-default">GetSelected</button>
</body>
<script src="/static/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="/static/js/bootstrap.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).on('submit','#new_user_form',function(e){
  e.preventDefault();

  $.ajax({
    type : 'POST',
    url : 'skill/create/', // hardcoding urls? not a good idea, use
    data : {
      name : $('#name').val(),
      type : $('#type').val(),
      csrfmiddlewaretoken:"{{ csrf_token }}"
    },
    sucess:function(){}
  });
});

</script>

<script>
    $(function(){

        //button select all or cancel
        $("#select-all").click(function () {
            var all = $("input.select-all")[0];
            all.checked = !all.checked
            var checked = all.checked;
            $("input.select-item").each(function (index,item) {
                item.checked = checked;
            });
        });

        //button select invert
        $("#select-invert").click(function () {
            $("input.select-item").each(function (index,item) {
                item.checked = !item.checked;
            });
            checkSelected();
        });

        //button get selected info
        $("#selected").click(function () {
            var items=[];
            $("input.select-item:checked:checked").each(function (index,item) {
                items[index] = item.value;
            });
            if (items.length < 1) {
                alert("no selected items!!!");
            }else {
                var values = items.join(',');
                console.log(values);
                var html = $("<div></div>");
                html.html("selected:"+values);
                html.appendTo("body");
            }
        });

        //column checkbox select all or cancel
        $("input.select-all").click(function () {
            var checked = this.checked;
            $("input.select-item").each(function (index,item) {
                item.checked = checked;
            });
        });

        //check selected items
        $("input.select-item").click(function () {
            var checked = this.checked;
            console.log(checked);
            checkSelected();
        });

        //check is all selected
        function checkSelected() {
            var all = $("input.select-all")[0];
            var total = $("input.select-item").length;
            var len = $("input.select-item:checked:checked").length;
            console.log("total:"+total);
            console.log("len:"+len);
            all.checked = len===total;
        }
    });
</script>
</html>
